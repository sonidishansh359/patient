<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hospital Management System</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    .sidebar {
      transition: all 0.3s ease;
    }
    .dashboard-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(0,0,0,0.1);
    }
    .form-input:focus {
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3);
    }
  </style>
</head>
<body class="bg-gray-100">
  <div id="root"></div>

  <script type="text/babel">
    // Database Schemas and Models
    const patientSchema = {
      name: { type: String, required: true },
      age: { type: Number, min: 0, max: 120 },
      gender: { type: String, enum: ['Male', 'Female', 'Other'] },
      contact: { type: String, required: true },
      address: String,
      bloodType: String,
      admissionDate: { type: Date, default: Date.now }
    };

    // Node.js Server Setup Example
    /*
    const express = require('express');
    const mongoose = require('mongoose');
    const app = express();
    
    mongoose.connect('mongodb://localhost/hospital_db', {
      useNewUrlParser: true,
      useUnifiedTopology: true
    });
    
    // Database Schemas and Models would be defined here
    */

    // Mock Database
    const mockDB = {
      patients: [
        { id: 1, name: 'John Smith', age: 45, gender: 'Male', contact: 'john@example.com', address: '123 Main St', bloodType: 'A+', admissionDate: '2023-05-15' },
        { id: 2, name: 'Jane Doe', age: 32, gender: 'Female', contact: 'jane@example.com', address: '456 Oak Ave', bloodType: 'B-', admissionDate: '2023-06-20' }
      ],
      staff: [
        { id: 1, name: 'Dr. Robert Johnson', position: 'Cardiologist', department: 'Cardiology', contact: 'rjohn@hospital.com' },
        { id: 2, name: 'Dr. Sarah Williams', position: 'Neurologist', department: 'Neurology', contact: 'swill@hospital.com' }
      ],
      appointments: [
        { id: 1, patientId: 1, doctorId: 1, date: '2023-07-15', time: '10:00', status: 'Scheduled' },
        { id: 2, patientId: 2, doctorId: 2, date: '2023-07-16', time: '14:30', status: 'Confirmed' }
      ],
      inventory: [
        { id: 1, name: 'Paracetamol', category: 'Medicine', quantity: 100, supplier: 'MediCorp', expiryDate: '2024-12-31' },
        { id: 2, name: 'Syringe', category: 'Equipment', quantity: 200, supplier: 'MedEquip', expiryDate: '2025-06-30' }
      ],
      bills: [
        { id: 1, patientId: 1, amount: 1500, status: 'Paid', date: '2023-07-01' },
        { id: 2, patientId: 2, amount: 2300, status: 'Pending', date: '2023-07-10' }
      ]
    };

    // Database Models Reference
    /*
    const Patient = mongoose.model('Patient', patientSchema);
    */

    // Mock API Functions
    const api = {
      // Patients
      getPatients: () => new Promise(resolve => setTimeout(() => resolve([...mockDB.patients]), 500)),
      addPatient: (patient) => {
        const newPatient = { ...patient, id: mockDB.patients.length + 1 };
        mockDB.patients.push(newPatient);
        return new Promise(resolve => setTimeout(() => resolve(newPatient), 500));
      },
      updatePatient: (id, updates) => {
        const index = mockDB.patients.findIndex(p => p.id === id);
        if (index !== -1) {
          mockDB.patients[index] = { ...mockDB.patients[index], ...updates };
        }
        return new Promise(resolve => setTimeout(() => resolve(mockDB.patients[index]), 500));
      },
      deletePatient: (id) => {
        mockDB.patients = mockDB.patients.filter(p => p.id !== id);
        return new Promise(resolve => setTimeout(() => resolve(), 500));
      },
      
      // Staff
      getStaff: () => new Promise(resolve => setTimeout(() => resolve([...mockDB.staff]), 500)),
      addStaff: (staff) => {
        const newStaff = { ...staff, id: mockDB.staff.length + 1 };
        mockDB.staff.push(newStaff);
        return new Promise(resolve => setTimeout(() => resolve(newStaff), 500));
      },
      updateStaff: (id, updates) => {
        const index = mockDB.staff.findIndex(s => s.id === id);
        if (index !== -1) {
          mockDB.staff[index] = { ...mockDB.staff[index], ...updates };
        }
        return new Promise(resolve => setTimeout(() => resolve(mockDB.staff[index]), 500));
      },
      deleteStaff: (id) => {
        mockDB.staff = mockDB.staff.filter(s => s.id !== id);
        return new Promise(resolve => setTimeout(() => resolve(), 500));
      },
      
      // Appointments
      getAppointments: () => new Promise(resolve => setTimeout(() => resolve([...mockDB.appointments]), 500)),
      addAppointment: (appointment) => {
        const newAppointment = { ...appointment, id: mockDB.appointments.length + 1 };
        mockDB.appointments.push(newAppointment);
        return new Promise(resolve => setTimeout(() => resolve(newAppointment), 500));
      },
      updateAppointment: (id, updates) => {
        const index = mockDB.appointments.findIndex(a => a.id === id);
        if (index !== -1) {
          mockDB.appointments[index] = { ...mockDB.appointments[index], ...updates };
        }
        return new Promise(resolve => setTimeout(() => resolve(mockDB.appointments[index]), 500));
      },
      deleteAppointment: (id) => {
        mockDB.appointments = mockDB.appointments.filter(a => a.id !== id);
        return new Promise(resolve => setTimeout(() => resolve(), 500));
      },
      
      // Inventory
      getInventory: () => new Promise(resolve => setTimeout(() => resolve([...mockDB.inventory]), 500)),
      addInventoryItem: (item) => {
        const newItem = { ...item, id: mockDB.inventory.length + 1 };
        mockDB.inventory.push(newItem);
        return new Promise(resolve => setTimeout(() => resolve(newItem), 500));
      },
      updateInventoryItem: (id, updates) => {
        const index = mockDB.inventory.findIndex(i => i.id === id);
        if (index !== -1) {
          mockDB.inventory[index] = { ...mockDB.inventory[index], ...updates };
        }
        return new Promise(resolve => setTimeout(() => resolve(mockDB.inventory[index]), 500));
      },
      deleteInventoryItem: (id) => {
        mockDB.inventory = mockDB.inventory.filter(i => i.id !== id);
        return new Promise(resolve => setTimeout(() => resolve(), 500));
      }
    };

    // React Components
    const { useState, useEffect } = React;

    // App Layout Component
    function App() {
      const [activeTab, setActiveTab] = useState('dashboard');
      const [sidebarOpen, setSidebarOpen] = useState(true);

      return (
        <div className="flex h-screen bg-gray-50">
          {/* Sidebar */}
          <div className={`sidebar bg-blue-800 text-white ${sidebarOpen ? 'w-64' : 'w-20'} overflow-hidden transition-all duration-300`}>
            <div className="flex items-center justify-between p-4 border-b border-blue-700">
              {sidebarOpen && <h1 className="text-xl font-bold">Hospital MS</h1>}
              <button 
                onClick={() => setSidebarOpen(!sidebarOpen)}
                className="p-1 rounded-md hover:bg-blue-700"
              >
                {sidebarOpen ? '«' : '»'}
              </button>
            </div>
            <nav className="mt-6">
              <SidebarItem 
                icon="🏠" 
                text="Dashboard" 
                active={activeTab === 'dashboard'} 
                onClick={() => setActiveTab('dashboard')}
                sidebarOpen={sidebarOpen}
              />
              <SidebarItem 
                icon="👨‍⚕️" 
                text="Patients" 
                active={activeTab === 'patients'} 
                onClick={() => setActiveTab('patients')}
                sidebarOpen={sidebarOpen}
              />
              <SidebarItem 
                icon="👩‍⚕️" 
                text="Staff" 
                active={activeTab === 'staff'} 
                onClick={() => setActiveTab('staff')}
                sidebarOpen={sidebarOpen}
              />
              <SidebarItem 
                icon="📅" 
                text="Appointments" 
                active={activeTab === 'appointments'} 
                onClick={() => setActiveTab('appointments')}
                sidebarOpen={sidebarOpen}
              />
              <SidebarItem 
                icon="💊" 
                text="Inventory" 
                active={activeTab === 'inventory'} 
                onClick={() => setActiveTab('inventory')}
                sidebarOpen={sidebarOpen}
              />
              <SidebarItem 
                icon="💰" 
                text="Billing" 
                active={activeTab === 'billing'} 
                onClick={() => setActiveTab('billing')}
                sidebarOpen={sidebarOpen}
              />
            </nav>
          </div>

          {/* Main Content */}
          <div className="flex-1 overflow-auto">
            <header className="bg-white shadow-sm p-4 flex justify-between items-center">
              <h2 className="text-xl font-semibold text-gray-800">
                {activeTab.charAt(0).toUpperCase() + activeTab.slice(1)}
              </h2>
              <div className="flex items-center space-x-4">
                <button className="p-2 rounded-full bg-gray-200 hover:bg-gray-300">
                  <span className="text-gray-600">🔔</span>
                </button>
                <div className="flex items-center">
                  <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/a6f6c3fe-818c-450a-b5be-59008fdaa125.png" alt="User profile" className="w-8 h-8 rounded-full" />
                  {sidebarOpen && <span className="ml-2 text-gray-700">Admin</span>}
                </div>
              </div>
            </header>

            <main className="p-6">
              {activeTab === 'dashboard' && <Dashboard />}
              {activeTab === 'patients' && <PatientManagement />}
              {activeTab === 'staff' && <StaffManagement />}
              {activeTab === 'appointments' && <AppointmentManagement />}
              {activeTab === 'inventory' && <InventoryManagement />}
              {activeTab === 'billing' && <BillingManagement />}
            </main>
          </div>
        </div>
      );
    }

    function SidebarItem({ icon, text, active, onClick, sidebarOpen }) {
      return (
        <div 
          className={`flex items-center p-4 cursor-pointer ${active ? 'bg-blue-700' : 'hover:bg-blue-700'}`}
          onClick={onClick}
        >
          <span className="text-lg">{icon}</span>
          {sidebarOpen && <span className="ml-3">{text}</span>}
        </div>
      );
    }

    function Dashboard() {
      const [stats, setStats] = useState({
        patients: 0,
        staff: 0,
        appointments: 0,
        inventory: 0
      });

      useEffect(() => {
        const fetchStats = async () => {
          const patients = await api.getPatients();
          const staff = await api.getStaff();
          const appointments = await api.getAppointments();
          const inventory = await api.getInventory();
          
          setStats({
            patients: patients.length,
            staff: staff.length,
            appointments: appointments.length,
            inventory: inventory.length
          });
        };
        fetchStats();
      }, []);

      return (
        <div>
          <h2 className="text-2xl font-bold mb-6">Hospital Overview</h2>
          
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
            <DashboardCard 
              title="Patients" 
              value={stats.patients} 
              icon="👨‍⚕️" 
              color="bg-blue-500" 
              description="Total registered patients"
            />
            <DashboardCard 
              title="Staff" 
              value={stats.staff} 
              icon="👩‍⚕️" 
              color="bg-green-500" 
              description="Medical and administrative staff"
            />
            <DashboardCard 
              title="Appointments" 
              value={stats.appointments} 
              icon="📅" 
              color="bg-purple-500" 
              description="Scheduled appointments"
            />
            <DashboardCard 
              title="Inventory" 
              value={stats.inventory} 
              icon="💊" 
              color="bg-orange-500" 
              description="Medical items in stock"
            />
          </div>

          <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <div className="bg-white p-6 rounded-lg shadow">
              <h3 className="text-lg font-semibold mb-4">Recent Patients</h3>
              <PatientTable limit={5} />
            </div>
            <div className="bg-white p-6 rounded-lg shadow">
              <h3 className="text-lg font-semibold mb-4">Upcoming Appointments</h3>
              <AppointmentTable limit={5} />
            </div>
          </div>
        </div>
      );
    }

    function DashboardCard({ title, value, icon, color, description }) {
      return (
        <div className={`dashboard-card ${color} text-white p-6 rounded-lg shadow transition-all duration-300`}>
          <div className="flex justify-between items-start">
            <div>
              <p className="text-sm opacity-80">{title}</p>
              <h3 className="text-3xl font-bold my-2">{value}</h3>
              <p className="text-sm opacity-80">{description}</p>
            </div>
            <span className="text-4xl">{icon}</span>
          </div>
        </div>
      );
    }

    function PatientManagement() {
      const [patients, setPatients] = useState([]);
      const [modalOpen, setModalOpen] = useState(false);
      const [currentPatient, setCurrentPatient] = useState(null);
      const [formData, setFormData] = useState({
        name: '',
        age: '',
        gender: 'Male',
        contact: '',
        address: '',
        bloodType: '',
        admissionDate: ''
      });

      useEffect(() => {
        const fetchPatients = async () => {
          const data = await api.getPatients();
          setPatients(data);
        };
        fetchPatients();
      }, []);

      const handleInputChange = (e) => {
        const { name, value } = e.target;
        setFormData(prev => ({ ...prev, [name]: value }));
      };

      const handleSubmit = async (e) => {
        e.preventDefault();
        if (currentPatient) {
          await api.updatePatient(currentPatient.id, formData);
        } else {
          await api.addPatient(formData);
        }
        resetForm();
        const data = await api.getPatients();
        setPatients(data);
        setModalOpen(false);
      };

      const handleEdit = (patient) => {
        setCurrentPatient(patient);
        setFormData({
          name: patient.name,
          age: patient.age,
          gender: patient.gender,
          contact: patient.contact,
          address: patient.address,
          bloodType: patient.bloodType,
          admissionDate: patient.admissionDate
        });
        setModalOpen(true);
      };

      const handleDelete = async (id) => {
        if (window.confirm('Are you sure you want to delete this patient?')) {
          await api.deletePatient(id);
          setPatients(patients.filter(p => p.id !== id));
        }
      };

      const resetForm = () => {
        setCurrentPatient(null);
        setFormData({
          name: '',
          age: '',
          gender: 'Male',
          contact: '',
          address: '',
          bloodType: '',
          admissionDate: ''
        });
      };

      return (
        <div>
          <div className="flex justify-between items-center mb-6">
            <h2 className="text-2xl font-bold">Patient Management</h2>
            <button 
              onClick={() => setModalOpen(true)}
              className="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition"
            >
              Add Patient
            </button>
          </div>

          <PatientTable patients={patients} onEdit={handleEdit} onDelete={handleDelete} />

          {/* Add/Edit Patient Modal */}
          {modalOpen && (
            <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
              <div className="bg-white p-6 rounded-lg w-full max-w-md">
                <h3 className="text-xl font-semibold mb-4">
                  {currentPatient ? 'Edit Patient' : 'Add New Patient'}
                </h3>
                <form onSubmit={handleSubmit}>
                  <div className="grid grid-cols-1 gap-4">
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-1">Full Name</label>
                      <input
                        type="text"
                        name="name"
                        value={formData.name}
                        onChange={handleInputChange}
                        className="form-input w-full px-3 py-2 border border-gray-300 rounded-md"
                        required
                      />
                    </div>
                    <div className="grid grid-cols-2 gap-4">
                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-1">Age</label>
                        <input
                          type="number"
                          name="age"
                          value={formData.age}
                          onChange={handleInputChange}
                          className="form-input w-full px-3 py-2 border border-gray-300 rounded-md"
                          required
                        />
                      </div>
                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-1">Gender</label>
                        <select
                          name="gender"
                          value={formData.gender}
                          onChange={handleInputChange}
                          className="form-input w-full px-3 py-2 border border-gray-300 rounded-md"
                        >
                          <option value="Male">Male</option>
                          <option value="Female">Female</option>
                          <option value="Other">Other</option>
                        </select>
                      </div>
                    </div>
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-1">Contact</label>
                      <input
                        type="text"
                        name="contact"
                        value={formData.contact}
                        onChange={handleInputChange}
                        className="form-input w-full px-3 py-2 border border-gray-300 rounded-md"
                        required
                      />
                    </div>
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-1">Address</label>
                      <input
                        type="text"
                        name="address"
                        value={formData.address}
                        onChange={handleInputChange}
                        className="form-input w-full px-3 py-2 border border-gray-300 rounded-md"
                      />
                    </div>
                    <div className="grid grid-cols-2 gap-4">
                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-1">Blood Type</label>
                        <select
                          name="bloodType"
                          value={formData.bloodType}
                          onChange={handleInputChange}
                          className="form-input w-full px-3 py-2 border border-gray-300 rounded-md"
                        >
                          <option value="">Select</option>
                          <option value="A+">A+</option>
                          <option value="A-">A-</option>
                          <option value="B+">B+</option>
                          <option value="B-">B-</option>
                          <option value="AB+">AB+</option>
                          <option value="AB-">AB-</option>
                          <option value="O+">O+</option>
                          <option value="O-">O-</option>
                        </select>
                      </div>
                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-1">Admission Date</label>
                        <input
                          type="date"
                          name="admissionDate"
                          value={formData.admissionDate}
                          onChange={handleInputChange}
                          className="form-input w-full px-3 py-2 border border-gray-300 rounded-md"
                        />
                      </div>
                    </div>
                  </div>
                  <div className="mt-6 flex justify-end space-x-3">
                    <button
                      type="button"
                      onClick={() => {
                        setModalOpen(false);
                        resetForm();
                      }}
                      className="px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50"
                    >
                      Cancel
                    </button>
                    <button
                      type="submit"
                      className="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"
                    >
                      {currentPatient ? 'Update' : 'Save'}
                    </button>
                  </div>
                </form>
              </div>
            </div>
          )}
        </div>
      );
    }

    function StaffManagement() {
      const [staff, setStaff] = useState([]);
      const [modalOpen, setModalOpen] = useState(false);
      const [currentStaff, setCurrentStaff] = useState(null);
      const [formData, setFormData] = useState({
        name: '',
        position: '',
        department: '',
        contact: ''
      });

      useEffect(() => {
        const fetchStaff = async () => {
          const data = await api.getStaff();
          setStaff(data);
        };
        fetchStaff();
      }, []);

      const handleInputChange = (e) => {
        const { name, value } = e.target;
        setFormData(prev => ({ ...prev, [name]: value }));
      };

      const handleSubmit = async (e) => {
        e.preventDefault();
        if (currentStaff) {
          await api.updateStaff(currentStaff.id, formData);
        } else {
          await api.addStaff(formData);
        }
        resetForm();
        const data = await api.getStaff();
        setStaff(data);
        setModalOpen(false);
      };

      const handleEdit = (staffMember) => {
        setCurrentStaff(staffMember);
        setFormData({
          name: staffMember.name,
          position: staffMember.position,
          department: staffMember.department,
          contact: staffMember.contact
        });
        setModalOpen(true);
      };

      const handleDelete = async (id) => {
        if (window.confirm('Are you sure you want to delete this staff member?')) {
          await api.deleteStaff(id);
          setStaff(staff.filter(s => s.id !== id));
        }
      };

      const resetForm = () => {
        setCurrentStaff(null);
        setFormData({
          name: '',
          position: '',
          department: '',
          contact: ''
        });
      };

      return (
        <div>
          <div className="flex justify-between items-center mb-6">
            <h2 className="text-2xl font-bold">Staff Management</h2>
            <button 
              onClick={() => setModalOpen(true)}
              className="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition"
            >
              Add Staff
            </button>
          </div>

          <div className="overflow-x-auto bg-white rounded-lg shadow">
            <table className="min-w-full divide-y divide-gray-200">
              <thead className="bg-gray-50">
                <tr>
                  <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Name</th>
                  <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Position</th>
                  <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Department</th>
                  <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Contact</th>
                  <th className="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                </tr>
              </thead>
              <tbody className="bg-white divide-y divide-gray-200">
                {staff.map(staffMember => (
                  <tr key={staffMember.id}>
                    <td className="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                      {staffMember.name}
                    </td>
                    <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                      {staffMember.position}
                    </td>
                    <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                      {staffMember.department}
                    </td>
                    <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                      {staffMember.contact}
                    </td>
                    <td className="px-6 py-4 whitespace-nowrap text-sm font-medium text-right">
                      <button
                        onClick={() => handleEdit(staffMember)}
                        className="text-blue-600 hover:text-blue-900 mr-3"
                      >
                        Edit
                      </button>
                      <button
                        onClick={() => handleDelete(staffMember.id)}
                        className="text-red-600 hover:text-red-900"
                      >
                        Delete
                      </button>
                    </td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>

          {/* Add/Edit Staff Modal */}
          {modalOpen && (
            <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
              <div className="bg-white p-6 rounded-lg w-full max-w-md">
                <h3 className="text-xl font-semibold mb-4">
                  {currentStaff ? 'Edit Staff' : 'Add New Staff'}
                </h3>
                <form onSubmit={handleSubmit}>
                  <div className="grid grid-cols-1 gap-4">
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-1">Full Name</label>
                      <input
                        type="text"
                        name="name"
                        value={formData.name}
                        onChange={handleInputChange}
                        className="form-input w-full px-3 py-2 border border-gray-300 rounded-md"
                        required
                      />
                    </div>
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-1">Position</label>
                      <input
                        type="text"
                        name="position"
                        value={formData.position}
                        onChange={handleInputChange}
                        className="form-input w-full px-3 py-2 border border-gray-300 rounded-md"
                        required
                      />
                    </div>
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-1">Department</label>
                      <input
                        type="text"
                        name="department"
                        value={formData.department}
                        onChange={handleInputChange}
                        className="form-input w-full px-3 py-2 border border-gray-300 rounded-md"
                        required
                      />
                    </div>
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-1">Contact</label>
                      <input
                        type="text"
                        name="contact"
                        value={formData.contact}
                        onChange={handleInputChange}
                        className="form-input w-full px-3 py-2 border border-gray-300 rounded-md"
                        required
                      />
                    </div>
                  </div>
                  <div className="mt-6 flex justify-end space-x-3">
                    <button
                      type="button"
                      onClick={() => {
                        setModalOpen(false);
                        resetForm();
                      }}
                      className="px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50"
                    >
                      Cancel
                    </button>
                    <button
                      type="submit"
                      className="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"
                    >
                      {currentStaff ? 'Update' : 'Save'}
                    </button>
                  </div>
                </form>
              </div>
            </div>
          )}
        </div>
      );
    }

    function AppointmentManagement() {
      const [appointments, setAppointments] = useState([]);
      const [patients, setPatients] = useState([]);
      const [staff, setStaff] = useState([]);
      const [modalOpen, setModalOpen] = useState(false);
      const [currentAppointment, setCurrentAppointment] = useState(null);
      const [formData, setFormData] = useState({
        patientId: '',
        doctorId: '',
        date: '',
        time: '',
        status: 'Scheduled'
      });

      useEffect(() => {
        const fetchData = async () => {
          const [appts, pts, stf] = await Promise.all([
            api.getAppointments(),
            api.getPatients(),
            api.getStaff()
          ]);
          setAppointments(appts);
          setPatients(pts);
          setStaff(stf);
        };
        fetchData();
      }, []);

      const handleInputChange = (e) => {
        const { name, value } = e.target;
        setFormData(prev => ({ ...prev, [name]: value }));
      };

      const handleSubmit = async (e) => {
        e.preventDefault();
        if (currentAppointment) {
          await api.updateAppointment(currentAppointment.id, formData);
        } else {
          await api.addAppointment(formData);
        }
        resetForm();
        const data = await api.getAppointments();
        setAppointments(data);
        setModalOpen(false);
      };

      const handleEdit = (appointment) => {
        setCurrentAppointment(appointment);
        setFormData({
          patientId: appointment.patientId,
          doctorId: appointment.doctorId,
          date: appointment.date,
          time: appointment.time,
          status: appointment.status
        });
        setModalOpen(true);
      };

      const handleDelete = async (id) => {
        if (window.confirm('Are you sure you want to delete this appointment?')) {
          await api.deleteAppointment(id);
          setAppointments(appointments.filter(a => a.id !== id));
        }
      };

      const resetForm = () => {
        setCurrentAppointment(null);
        setFormData({
          patientId: '',
          doctorId: '',
          date: '',
          time: '',
          status: 'Scheduled'
        });
      };

      const getPatientName = (id) => {
        const patient = patients.find(p => p.id === id);
        return patient ? patient.name : 'Unknown';
      };

      const getStaffName = (id) => {
        const staffMember = staff.find(s => s.id === id);
        return staffMember ? staffMember.name : 'Unknown';
      };

      return (
        <div>
          <div className="flex justify-between items-center mb-6">
            <h2 className="text-2xl font-bold">Appointment Management</h2>
            <button 
              onClick={() => setModalOpen(true)}
              className="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition"
            >
              Schedule Appointment
            </button>
          </div>

          <div className="overflow-x-auto bg-white rounded-lg shadow">
            <table className="min-w-full divide-y divide-gray-200">
              <thead className="bg-gray-50">
                <tr>
                  <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Patient</th>
                  <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Doctor</th>
                  <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th>
                  <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Time</th>
                  <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                  <th className="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                </tr>
              </thead>
              <tbody className="bg-white divide-y divide-gray-200">
                {appointments.map(appointment => (
                  <tr key={appointment.id}>
                    <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                      {getPatientName(appointment.patientId)}
                    </td>
                    <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                      {getStaffName(appointment.doctorId)}
                    </td>
                    <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                      {appointment.date}
                    </td>
                    <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                      {appointment.time}
                    </td>
                    <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                      <span className={`px-2 py-1 text-xs rounded-full ${
                        appointment.status === 'Scheduled' ? 'bg-yellow-100 text-yellow-800' :
                        appointment.status === 'Confirmed' ? 'bg-green-100 text-green-800' :
                        appointment.status === 'Cancelled' ? 'bg-red-100 text-red-800' :
                        'bg-gray-100 text-gray-800'
                      }`}>
                        {appointment.status}
                      </span>
                    </td>
                    <td className="px-6 py-4 whitespace-nowrap text-sm font-medium text-right">
                      <button
                        onClick={() => handleEdit(appointment)}
                        className="text-blue-600 hover:text-blue-900 mr-3"
                      >
                        Edit
                      </button>
                      <button
                        onClick={() => handleDelete(appointment.id)}
                        className="text-red-600 hover:text-red-900"
                      >
                        Delete
                      </button>
                    </td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>

          {/* Add/Edit Appointment Modal */}
          {modalOpen && (
            <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
              <div className="bg-white p-6 rounded-lg w-full max-w-md">
                <h3 className="text-xl font-semibold mb-4">
                  {currentAppointment ? 'Edit Appointment' : 'Schedule New Appointment'}
                </h3>
                <form onSubmit={handleSubmit}>
                  <div className="grid grid-cols-1 gap-4">
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-1">Patient</label>
                      <select
                        name="patientId"
                        value={formData.patientId}
                        onChange={handleInputChange}
                        className="form-input w-full px-3 py-2 border border-gray-300 rounded-md"
                        required
                      >
                        <option value="">Select Patient</option>
                        {patients.map(patient => (
                          <option key={patient.id} value={patient.id}>{patient.name}</option>
                        ))}
                      </select>
                    </div>
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-1">Doctor</label>
                      <select
                        name="doctorId"
                        value={formData.doctorId}
                        onChange={handleInputChange}
                        className="form-input w-full px-3 py-2 border border-gray-300 rounded-md"
                        required
                      >
                        <option value="">Select Doctor</option>
                        {staff.map(staffMember => (
                          <option key={staffMember.id} value={staffMember.id}>{staffMember.name} - {staffMember.department}</option>
                        ))}
                      </select>
                    </div>
                    <div className="grid grid-cols-2 gap-4">
                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-1">Date</label>
                        <input
                          type="date"
                          name="date"
                          value={formData.date}
                          onChange={handleInputChange}
                          className="form-input w-full px-3 py-2 border border-gray-300 rounded-md"
                          required
                        />
                      </div>
                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-1">Time</label>
                        <input
                          type="time"
                          name="time"
                          value={formData.time}
                          onChange={handleInputChange}
                          className="form-input w-full px-3 py-2 border border-gray-300 rounded-md"
                          required
                        />
                      </div>
                    </div>
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-1">Status</label>
                      <select
                        name="status"
                        value={formData.status}
                        onChange={handleInputChange}
                        className="form-input w-full px-3 py-2 border border-gray-300 rounded-md"
                      >
                        <option value="Scheduled">Scheduled</option>
                        <option value="Confirmed">Confirmed</option>
                        <option value="Cancelled">Cancelled</option>
                      </select>
                    </div>
                  </div>
                  <div className="mt-6 flex justify-end space-x-3">
                    <button
                      type="button"
                      onClick={() => {
                        setModalOpen(false);
                        resetForm();
                      }}
                      className="px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50"
                    >
                      Cancel
                    </button>
                    <button
                      type="submit"
                      className="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"
                    >
                      {currentAppointment ? 'Update' : 'Schedule'}
                    </button>
                  </div>
                </form>
              </div>
            </div>
          )}
        </div>
      );
    }

    function InventoryManagement() {
      const [inventory, setInventory] = useState([]);
      const [modalOpen, setModalOpen] = useState(false);
      const [currentItem, setCurrentItem] = useState(null);
      const [formData, setFormData] = useState({
        name: '',
        category: '',
        quantity: '',
        supplier: '',
        expiryDate: ''
      });

      useEffect(() => {
        const fetchInventory = async () => {
          const data = await api.getInventory();
          setInventory(data);
        };
        fetchInventory();
      }, []);

      const handleInputChange = (e) => {
        const { name, value } = e.target;
        setFormData(prev => ({ ...prev, [name]: value }));
      };

      const handleSubmit = async (e) => {
        e.preventDefault();
        if (currentItem) {
          await api.updateInventoryItem(currentItem.id, formData);
        } else {
          await api.addInventoryItem(formData);
        }
        resetForm();
        const data = await api.getInventory();
        setInventory(data);
        setModalOpen(false);
      };

      const handleEdit = (item) => {
        setCurrentItem(item);
        setFormData({
          name: item.name,
          category: item.category,
          quantity: item.quantity,
          supplier: item.supplier,
          expiryDate: item.expiryDate
        });
        setModalOpen(true);
      };

      const handleDelete = async (id) => {
        if (window.confirm('Are you sure you want to delete this inventory item?')) {
          await api.deleteInventoryItem(id);
          setInventory(inventory.filter(i => i.id !== id));
        }
      };

      const resetForm = () => {
        setCurrentItem(null);
        setFormData({
          name: '',
          category: '',
          quantity: '',
          supplier: '',
          expiryDate: ''
        });
      };

      return (
        <div>
          <div className="flex justify-between items-center mb-6">
            <h2 className="text-2xl font-bold">Inventory Management</h2>
            <button 
              onClick={() => setModalOpen(true)}
              className="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition"
            >
              Add Item
            </button>
          </div>

          <div className="overflow-x-auto bg-white rounded-lg shadow">
            <table className="min-w-full divide-y divide-gray-200">
              <thead className="bg-gray-50">
                <tr>
                  <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Item Name</th>
                  <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Category</th>
                  <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Quantity</th>
                  <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Supplier</th>
                  <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Expiry Date</th>
                  <th className="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                </tr>
              </thead>
              <tbody className="bg-white divide-y divide-gray-200">
                {inventory.map(item => (
                  <tr key={item.id}>
                    <td className="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                      {item.name}
                    </td>
                    <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                      {item.category}
                    </td>
                    <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                      {item.quantity}
                    </td>
                    <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                      {item.supplier}
                    </td>
                    <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                      {item.expiryDate}
                    </td>
                    <td className="px-6 py-4 whitespace-nowrap text-sm font-medium text-right">
                      <button
                        onClick={() => handleEdit(item)}
                        className="text-blue-600 hover:text-blue-900 mr-3"
                      >
                        Edit
                      </button>
                      <button
                        onClick={() => handleDelete(item.id)}
                        className="text-red-600 hover:text-red-900"
                      >
                        Delete
                      </button>
                    </td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>

          {/* Add/Edit Inventory Modal */}
          {modalOpen && (
            <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
              <div className="bg-white p-6 rounded-lg w-full max-w-md">
                <h3 className="text-xl font-semibold mb-4">
                  {currentItem ? 'Edit Inventory Item' : 'Add New Inventory Item'}
                </h3>
                <form onSubmit={handleSubmit}>
                  <div className="grid grid-cols-1 gap-4">
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-1">Item Name</label>
                      <input
                        type="text"
                        name="name"
                        value={formData.name}
                        onChange={handleInputChange}
                        className="form-input w-full px-3 py-2 border border-gray-300 rounded-md"
                        required
                      />
                    </div>
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-1">Category</label>
                      <select
                        name="category"
                        value={formData.category}
                        onChange={handleInputChange}
                        className="form-input w-full px-3 py-2 border border-gray-300 rounded-md"
                        required
                      >
                        <option value="">Select Category</option>
                        <option value="Medicine">Medicine</option>
                        <option value="Equipment">Equipment</option>
                        <option value="Consumable">Consumable</option>
                        <option value="Other">Other</option>
                      </select>
                    </div>
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-1">Quantity</label>
                      <input
                        type="number"
                        name="quantity"
                        value={formData.quantity}
                        onChange={handleInputChange}
                        className="form-input w-full px-3 py-2 border border-gray-300 rounded-md"
                        required
                      />
                    </div>
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-1">Supplier</label>
                      <input
                        type="text"
                        name="supplier"
                        value={formData.supplier}
                        onChange={handleInputChange}
                        className="form-input w-full px-3 py-2 border border-gray-300 rounded-md"
                      />
                    </div>
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-1">Expiry Date</label>
                      <input
                        type="date"
                        name="expiryDate"
                        value={formData.expiryDate}
                        onChange={handleInputChange}
                        className="form-input w-full px-3 py-2 border border-gray-300 rounded-md"
                      />
                    </div>
                  </div>
                  <div className="mt-6 flex justify-end space-x-3">
                    <button
                      type="button"
                      onClick={() => {
                        setModalOpen(false);
                        resetForm();
                      }}
                      className="px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50"
                    >
                      Cancel
                    </button>
                    <button
                      type="submit"
                      className="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"
                    >
                      {currentItem ? 'Update' : 'Save'}
                    </button>
                  </div>
                </form>
              </div>
            </div>
          )}
        </div>
      );
    }

    function BillingManagement() {
      const [bills, setBills] = useState([]);
      const [patients, setPatients] = useState([]);

      useEffect(() => {
        const fetchData = async () => {
          const [billsData, patientsData] = await Promise.all([
            api.getPatients().then(pts => {
              // Mock bills based on patients
              return pts.map((p, i) => ({
                id: i + 1,
                patientId: p.id,
                amount: Math.floor(Math.random() * 5000) + 1000,
                status: ['Paid', 'Pending', 'Partial'][Math.floor(Math.random() * 3)],
                date: new Date(Date.now() - Math.floor(Math.random() * 30) * 86400000).toISOString().split('T')[0]
              }));
            }),
            api.getPatients()
          ]);
          setBills(billsData);
          setPatients(patientsData);
        };
        fetchData();
      }, []);

      const getPatientName = (id) => {
        const patient = patients.find(p => p.id === id);
        return patient ? patient.name : 'Unknown';
      };

      return (
        <div>
          <div className="flex justify-between items-center mb-6">
            <h2 className="text-2xl font-bold">Billing Management</h2>
            <button 
              className="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition"
            >
              Generate Bill
            </button>
          </div>

          <div className="overflow-x-auto bg-white rounded-lg shadow">
            <table className="min-w-full divide-y divide-gray-200">
              <thead className="bg-gray-50">
                <tr>
                  <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Patient</th>
                  <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Amount</th>
                  <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                  <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th>
                  <th className="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                </tr>
              </thead>
              <tbody className="bg-white divide-y divide-gray-200">
                {bills.map(bill => (
                  <tr key={bill.id}>
                    <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                      {getPatientName(bill.patientId)}
                    </td>
                    <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                      ${bill.amount.toLocaleString()}
                    </td>
                    <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                      <span className={`px-2 py-1 text-xs rounded-full ${
                        bill.status === 'Paid' ? 'bg-green-100 text-green-800' :
                        bill.status === 'Pending' ? 'bg-yellow-100 text-yellow-800' :
                        'bg-blue-100 text-blue-800'
                      }`}>
                        {bill.status}
                      </span>
                    </td>
                    <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                      {bill.date}
                    </td>
                    <td className="px-6 py-4 whitespace-nowrap text-sm font-medium text-right">
                      <button className="text-blue-600 hover:text-blue-900 mr-3">
                        View
                      </button>
                      <button className="text-green-600 hover:text-green-900">
                        Print
                      </button>
                    </td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
        </div>
      );
    }

    function PatientTable({ patients, onEdit, onDelete, limit }) {
      const [data, setData] = useState(patients || []);
      
      useEffect(() => {
        if (!patients) {
          const fetchPatients = async () => {
            const results = await api.getPatients();
            if (limit) {
              setData(results.slice(0, limit));
            } else {
              setData(results);
            }
          };
          fetchPatients();
        }
      }, [patients, limit]);

      return (
        <div className="overflow-x-auto">
          <table className="min-w-full divide-y divide-gray-200">
            <thead className="bg-gray-50">
              <tr>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Name</th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Age</th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Gender</th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Contact</th>
                {onEdit && <th className="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>}
              </tr>
            </thead>
            <tbody className="bg-white divide-y divide-gray-200">
              {data.map(patient => (
                <tr key={patient.id}>
                  <td className="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                    {patient.name}
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    {patient.age}
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    {patient.gender}
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    {patient.contact}
                  </td>
                  {onEdit && (
                    <td className="px-6 py-4 whitespace-nowrap text-sm font-medium text-right">
                      <button
                        onClick={() => onEdit(patient)}
                        className="text-blue-600 hover:text-blue-900 mr-3"
                      >
                        Edit
                      </button>
                      <button
                        onClick={() => onDelete(patient.id)}
                        className="text-red-600 hover:text-red-900"
                      >
                        Delete
                      </button>
                    </td>
                  )}
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      );
    }

    function AppointmentTable({ appointments, onEdit, onDelete, limit }) {
      const [data, setData] = useState(appointments || []);
      const [patients, setPatients] = useState([]);
      const [staff, setStaff] = useState([]);

      useEffect(() => {
        if (!appointments) {
          const fetchData = async () => {
            const [appts, pts, stf] = await Promise.all([
              api.getAppointments(),
              api.getPatients(),
              api.getStaff()
            ]);
            
            if (limit) {
              setData(appts.slice(0, limit));
            } else {
              setData(appts);
            }
            setPatients(pts);
            setStaff(stf);
          };
          fetchData();
        }
      }, [appointments, limit]);

      const getPatientName = (id) => {
        const patient = patients.find(p => p.id === id);
        return patient ? patient.name : 'Unknown';
      };

      const getStaffName = (id) => {
        const staffMember = staff.find(s => s.id === id);
        return staffMember ? staffMember.name : 'Unknown';
      };

      return (
        <div className="overflow-x-auto">
          <table className="min-w-full divide-y divide-gray-200">
            <thead className="bg-gray-50">
              <tr>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Patient</th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Doctor</th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                {onEdit && <th className="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>}
              </tr>
            </thead>
            <tbody className="bg-white divide-y divide-gray-200">
              {data.map(appointment => (
                <tr key={appointment.id}>
                  <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                    {getPatientName(appointment.patientId)}
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    {getStaffName(appointment.doctorId)}
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    {appointment.date} at {appointment.time}
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    <span className={`px-2 py-1 text-xs rounded-full ${
                      appointment.status === 'Scheduled' ? 'bg-yellow-100 text-yellow-800' :
                      appointment.status === 'Confirmed' ? 'bg-green-100 text-green-800' :
                      'bg-red-100 text-red-800'
                    }`}>
                      {appointment.status}
                    </span>
                  </td>
                  {onEdit && (
                    <td className="px-6 py-4 whitespace-nowrap text-sm font-medium text-right">
                      <button
                        onClick={() => onEdit(appointment)}
                        className="text-blue-600 hover:text-blue-900 mr-3"
                      >
                        Edit
                      </button>
                      <button
                        onClick={() => onDelete(appointment.id)}
                        className="text-red-600 hover:text-red-900"
                      >
                        Delete
                      </button>
                    </td>
                  )}
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      );
    }

    // Render the App component to the root div
    ReactDOM.render(<App />, document.getElementById('root'));
  </script>
</body>
</html>
